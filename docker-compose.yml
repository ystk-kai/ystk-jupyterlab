version: "3.9"

x-base: &base
  image: ystk-jupyterlab
  container_name: ystk-jupyterlab
  build: .
  volumes:
    - ./jupyter:/home/jovyan/.jupyter
    - jupyter-app:/opt/conda/share/jupyter
    - ./notebooks:/notebooks

services:
  shell:
    <<: *base
    entrypoint: ["bash"]
    user: root
    profiles:
      - none
      
  jupyterlab:
    <<: *base
    entrypoint: ["start-notebook.sh"]
    ports:
      - 8888:8888

volumes:
  jupyter-app:
